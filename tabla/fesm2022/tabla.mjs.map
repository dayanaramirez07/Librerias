{"version":3,"file":"tabla.mjs","sources":["../../../projects/tabla/src/lib/pipes/capitalizar.pipe.ts","../../../projects/tabla/src/lib/components/acciones/acciones.component.ts","../../../projects/tabla/src/lib/components/acciones/acciones.component.html","../../../projects/tabla/src/lib/components/tabla/tabla.component.ts","../../../projects/tabla/src/lib/components/tabla/tabla.component.html","../../../projects/tabla/src/public-api.ts","../../../projects/tabla/src/tabla.ts"],"sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    name: 'capitalizar',\r\n    standalone: true\r\n})\r\nexport class CapitalizarPipe implements PipeTransform {\r\n\r\n    public transform(value: string): string {\r\n        if (!value) return '';\r\n        return value.charAt(0).toUpperCase() + value.slice(1).toLowerCase();\r\n    }\r\n\r\n}","import { CommonModule } from '@angular/common';\r\nimport { Component, Input } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { NgbTooltipModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { CapitalizarPipe } from '../../pipes/capitalizar.pipe';\r\n\r\n@Component({\r\n  selector: 'app-acciones',\r\n  standalone: true,\r\n  imports: [\r\n    RouterModule,\r\n    CommonModule,\r\n    CapitalizarPipe,\r\n    NgbTooltipModule\r\n  ],\r\n  templateUrl: './acciones.component.html',\r\n  styleUrl: './acciones.component.css'\r\n})\r\nexport class AccionesComponent {\r\n\r\n  /**\r\n   * Listado de accciones con la estructura: { nombre: valor, icono: valor, metodo: valor, color: valor }\r\n   */\r\n  @Input() public dato: any = {};\r\n  @Input() public acciones: any[] = [];\r\n\r\n}","<div class=\"gap-2 d-md-flex justify-content-md-center\">\r\n\r\n    <ng-container *ngFor=\"let accion of acciones\">\r\n        <button \r\n            *ngIf=\"!accion.habilitada || accion.habilitada(dato)\"\r\n            type=\"button\"\r\n            class=\"btn btn-sm\"\r\n            [ngClass]=\"accion.color\"\r\n            (click)=\"accion.metodo(dato)\"\r\n            (mouseenter)=\"tooltip.open()\"\r\n            (mouseleave)=\"tooltip.close()\"\r\n            [ngbTooltip]=\"accion.nombre | capitalizar\"\r\n            #tooltip=\"ngbTooltip\"\r\n            triggers=\"manual\"\r\n            placement=\"bottom\">\r\n            <i class=\"fas\" [ngClass]=\"accion.icono\"></i>\r\n        </button>\r\n    </ng-container>\r\n\r\n</div>","import { CommonModule } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, ElementRef, EventEmitter, Input, Output, QueryList, ViewChildren } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { AccionesComponent } from \"../acciones/acciones.component\";\r\nimport { Accion } from '../../models/accion';\r\nimport { Columna } from '../../models/columna';\r\n\r\n@Component({\r\n  selector: 'lib-tabla',\r\n  standalone: true,\r\n  imports: [\r\n    FormsModule,\r\n    CommonModule,\r\n    AccionesComponent\r\n  ],\r\n  templateUrl: './tabla.component.html',\r\n  styleUrl: './tabla.component.css',\r\n  host: {\r\n    '(window:resize)': 'onResize($event)'\r\n  }\r\n})\r\nexport class TablaComponent {\r\n\r\n  protected anchoEncabezados: string[] = [];\r\n\r\n  @Input() public datos: any[] = [];\r\n  @Input() public filtro: string = '';\r\n  @Input() public accion: boolean = true;\r\n  @Input() public altoTabla: string = '';\r\n  @Input() public acciones: Accion[] = [];\r\n  @Input() public columnas: Columna[] = [];\r\n  @Input() public enModal: boolean = false;\r\n  @ViewChildren('encabezados') protected encabezados!: QueryList<ElementRef>;\r\n  @Output() protected datoSeleccionado: EventEmitter<any> = new EventEmitter();\r\n\r\n  public labels = {\r\n    acciones: 'Acciones'\r\n  }\r\n\r\n  constructor(\r\n    private cdr: ChangeDetectorRef\r\n  ) { }\r\n\r\n  public ngAfterViewInit(): void {\r\n    setTimeout(() => {\r\n      this.onResize();\r\n    }, 1);\r\n  }\r\n\r\n  public ngAfterContentChecked(): void {\r\n    this.prepararDatosParaTabla();\r\n    this.onResize();\r\n  }\r\n\r\n  public onResize() {\r\n    if (this.encabezados && this.encabezados.length > 0) {\r\n      const anchosColumnas = this.encabezados.toArray()\r\n        .map(encabezado => encabezado.nativeElement.offsetWidth);\r\n\r\n      this.anchoEncabezados = anchosColumnas.map(ancho => `${ancho}px`);\r\n      this.cdr.detectChanges();\r\n    }\r\n  }\r\n\r\n  protected prepararDatosParaTabla() {\r\n    this.datos.forEach(dato => {\r\n      if (dato.dv && !dato.numeroDocumento.includes(`-${dato.dv}`)) {\r\n        dato.numeroDocumento = dato.numeroDocumento + '-' + dato.dv;\r\n      }\r\n\r\n      if (dato.nombres && dato.apellidos) {\r\n        dato.nombreCompleto = dato.nombres + ' ' + dato.apellidos;\r\n      }\r\n\r\n      Object.keys(dato).forEach(key => {\r\n        if (typeof dato[key] === 'boolean') {\r\n          dato[key] = dato[key] ? 'SÃ­' : 'No';\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  protected onDatoSeleccionado(dato: any) {\r\n    this.datoSeleccionado.emit(dato);\r\n  }\r\n\r\n}","<div #divTabla class=\"d-flex flex-column border border-1 border-secondary-subtle\"\r\n    [ngStyle]=\"{'height': altoTabla}\">\r\n    <div class=\"div-encabezado\">\r\n        <table class=\"table table-bordered mb-0 border-secondary-subtle\">\r\n            <thead class=\"align-middle position-sticky top-0 shadow-sm text-center\">\r\n                <tr>\r\n                    <th \r\n                        #encabezados \r\n                        *ngFor=\"let columna of columnas\"\r\n                        [style.width.%]=\"columna.ancho\">\r\n                        {{ columna.nombre }}\r\n                    </th>\r\n                    <th \r\n                        *ngIf=\"accion && !enModal\"\r\n                        [style.width]=\"acciones.length > 3 ? '25%' : '15%'\">\r\n                        {{labels.acciones}}\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n        </table>\r\n    </div>\r\n    <div class=\"div-cuerpo-tabla overflow-y-auto\">\r\n        <table class=\"table table-bordered mb-0\">\r\n            <tbody class=\"align-middle\">\r\n                <tr \r\n                    *ngFor=\"let dato of datos\" \r\n                    (click)=\"enModal ? onDatoSeleccionado(dato) : ''\"\r\n                    [style.cursor]=\"enModal ? 'pointer' : ''\">\r\n                    <td \r\n                        *ngFor=\"let columna of columnas; let i = index\" \r\n                        [style.width]=\"anchoEncabezados[i]\"\r\n                        [ngClass]=\"columna.alineacion\">\r\n                        {{ dato[columna.campoDB] }}\r\n                    </td>\r\n                    <td *ngIf=\"accion && !enModal\">\r\n                        <app-acciones \r\n                            *ngIf=\"acciones.length > 0\"\r\n                            [dato]=\"dato\"\r\n                            [acciones]=\"acciones\">\r\n                        </app-acciones>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>","/*\r\n * Public API Surface of tabla\r\n */\r\n\r\nexport * from './lib/components/acciones/acciones.component';\r\nexport * from './lib/components/tabla/tabla.component';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;;;;;;;MAMa,eAAe,CAAA;AAEjB,IAAA,SAAS,CAAC,KAAa,EAAA;AAC1B,QAAA,IAAI,CAAC,KAAK;AAAE,YAAA,OAAO,EAAE;AACrB,QAAA,OAAO,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE;;+GAJ9D,eAAe,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,IAAA,EAAA,CAAA,CAAA;6GAAf,eAAe,EAAA,YAAA,EAAA,IAAA,EAAA,IAAA,EAAA,aAAA,EAAA,CAAA,CAAA;;4FAAf,eAAe,EAAA,UAAA,EAAA,CAAA;kBAJ3B,IAAI;AAAC,YAAA,IAAA,EAAA,CAAA;AACF,oBAAA,IAAI,EAAE,aAAa;AACnB,oBAAA,UAAU,EAAE;AACf,iBAAA;;;MCaY,iBAAiB,CAAA;AAZ9B,IAAA,WAAA,GAAA;AAcE;;AAEG;QACa,IAAI,CAAA,IAAA,GAAQ,EAAE;QACd,IAAQ,CAAA,QAAA,GAAU,EAAE;AAErC;+GARY,iBAAiB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;mGAAjB,iBAAiB,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,cAAA,EAAA,MAAA,EAAA,EAAA,IAAA,EAAA,MAAA,EAAA,QAAA,EAAA,UAAA,EAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EClB9B,kvBAmBM,EDTF,MAAA,EAAA,CAAA,EAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EAAA,YAAY,8BACZ,YAAY,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,OAAA,EAAA,QAAA,EAAA,WAAA,EAAA,MAAA,EAAA,CAAA,OAAA,EAAA,SAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,OAAA,EAAA,QAAA,EAAA,kBAAA,EAAA,MAAA,EAAA,CAAA,SAAA,EAAA,cAAA,EAAA,eAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,IAAA,EAAA,QAAA,EAAA,QAAA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,UAAA,EAAA,UAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,MAAA,EAAA,IAAA,EACZ,eAAe,EAAA,IAAA,EAAA,aAAA,EAAA,EAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EACf,gBAAgB,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,UAAA,EAAA,QAAA,EAAA,cAAA,EAAA,MAAA,EAAA,CAAA,WAAA,EAAA,WAAA,EAAA,WAAA,EAAA,eAAA,EAAA,UAAA,EAAA,gBAAA,EAAA,WAAA,EAAA,gBAAA,EAAA,cAAA,EAAA,gBAAA,EAAA,WAAA,EAAA,YAAA,EAAA,YAAA,CAAA,EAAA,OAAA,EAAA,CAAA,OAAA,EAAA,QAAA,CAAA,EAAA,QAAA,EAAA,CAAA,YAAA,CAAA,EAAA,CAAA,EAAA,CAAA,CAAA;;4FAKP,iBAAiB,EAAA,UAAA,EAAA,CAAA;kBAZ7B,SAAS;+BACE,cAAc,EAAA,UAAA,EACZ,IAAI,EACP,OAAA,EAAA;wBACP,YAAY;wBACZ,YAAY;wBACZ,eAAe;wBACf;AACD,qBAAA,EAAA,QAAA,EAAA,kvBAAA,EAAA;8BASe,IAAI,EAAA,CAAA;sBAAnB;gBACe,QAAQ,EAAA,CAAA;sBAAvB;;;MEHU,cAAc,CAAA;AAkBzB,IAAA,WAAA,CACU,GAAsB,EAAA;QAAtB,IAAG,CAAA,GAAA,GAAH,GAAG;QAjBH,IAAgB,CAAA,gBAAA,GAAa,EAAE;QAEzB,IAAK,CAAA,KAAA,GAAU,EAAE;QACjB,IAAM,CAAA,MAAA,GAAW,EAAE;QACnB,IAAM,CAAA,MAAA,GAAY,IAAI;QACtB,IAAS,CAAA,SAAA,GAAW,EAAE;QACtB,IAAQ,CAAA,QAAA,GAAa,EAAE;QACvB,IAAQ,CAAA,QAAA,GAAc,EAAE;QACxB,IAAO,CAAA,OAAA,GAAY,KAAK;AAEpB,QAAA,IAAA,CAAA,gBAAgB,GAAsB,IAAI,YAAY,EAAE;AAErE,QAAA,IAAA,CAAA,MAAM,GAAG;AACd,YAAA,QAAQ,EAAE;SACX;;IAMM,eAAe,GAAA;QACpB,UAAU,CAAC,MAAK;YACd,IAAI,CAAC,QAAQ,EAAE;SAChB,EAAE,CAAC,CAAC;;IAGA,qBAAqB,GAAA;QAC1B,IAAI,CAAC,sBAAsB,EAAE;QAC7B,IAAI,CAAC,QAAQ,EAAE;;IAGV,QAAQ,GAAA;AACb,QAAA,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;AACnD,YAAA,MAAM,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO;iBAC5C,GAAG,CAAC,UAAU,IAAI,UAAU,CAAC,aAAa,CAAC,WAAW,CAAC;AAE1D,YAAA,IAAI,CAAC,gBAAgB,GAAG,cAAc,CAAC,GAAG,CAAC,KAAK,IAAI,CAAA,EAAG,KAAK,CAAA,EAAA,CAAI,CAAC;AACjE,YAAA,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE;;;IAIlB,sBAAsB,GAAA;AAC9B,QAAA,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,IAAG;AACxB,YAAA,IAAI,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,EAAE,CAAE,CAAA,CAAC,EAAE;AAC5D,gBAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE;;YAG7D,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,EAAE;AAClC,gBAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC,SAAS;;YAG3D,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,IAAG;gBAC9B,IAAI,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE;AAClC,oBAAA,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,IAAI;;AAEvC,aAAC,CAAC;AACJ,SAAC,CAAC;;AAGM,IAAA,kBAAkB,CAAC,IAAS,EAAA;AACpC,QAAA,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC;;+GA9DvB,cAAc,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA,EAAA,CAAA,iBAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAAd,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,cAAc,6aCrB3B,4hEA6CM,EAAA,MAAA,EAAA,CAAA,mSAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EDlCF,WAAW,EACX,EAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EAAA,YAAY,mbACZ,iBAAiB,EAAA,QAAA,EAAA,cAAA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,UAAA,CAAA,EAAA,CAAA,EAAA,CAAA,CAAA;;4FAQR,cAAc,EAAA,UAAA,EAAA,CAAA;kBAd1B,SAAS;+BACE,WAAW,EAAA,UAAA,EACT,IAAI,EACP,OAAA,EAAA;wBACP,WAAW;wBACX,YAAY;wBACZ;qBACD,EAGK,IAAA,EAAA;AACJ,wBAAA,iBAAiB,EAAE;AACpB,qBAAA,EAAA,QAAA,EAAA,4hEAAA,EAAA,MAAA,EAAA,CAAA,mSAAA,CAAA,EAAA;sFAMe,KAAK,EAAA,CAAA;sBAApB;gBACe,MAAM,EAAA,CAAA;sBAArB;gBACe,MAAM,EAAA,CAAA;sBAArB;gBACe,SAAS,EAAA,CAAA;sBAAxB;gBACe,QAAQ,EAAA,CAAA;sBAAvB;gBACe,QAAQ,EAAA,CAAA;sBAAvB;gBACe,OAAO,EAAA,CAAA;sBAAtB;gBACsC,WAAW,EAAA,CAAA;sBAAjD,YAAY;uBAAC,aAAa;gBACP,gBAAgB,EAAA,CAAA;sBAAnC;;;AEjCH;;AAEG;;ACFH;;AAEG;;;;"}